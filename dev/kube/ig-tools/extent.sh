#!/bin/bash
## Given a path to a file holding a list of events, as generated by
## the `upwatch` tool, compute the extent/size of the time interval
## covered by the events in it.

projection() {
    awk "{ print \$$1 }"
}

# Extract timestamps of first and last event entry
start=$(head -1 "${1}" | projection 2)
done=$(tail -1 "${1}" | projection 2)

# Compute difference in seconds, then convert to minutes and seconds.
delta=$(( done - start ))
min=$(( delta / 60 ))
sec=$(( delta - 60 * min ))

# Show range in both forms.
echo "${delta}s = ${min}m:${sec}s"
